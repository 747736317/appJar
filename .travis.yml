language: python
python:
    - "2.7"
    - "3.5"
env:
    - PYTHONPATH=.

before_install:
    - pip install pytest pytest-cov
    - pip install coveralls

before_script:
    - "export DISPLAY=:99.0"
    - "sh -e /etc/init.d/xvfb start"
    - sleep 3 # give xvfb some time to start
    - VERS=`python -c 'import sys; print(".".join(map(str, sys.version_info[:2])))'`

script:
    - python tests/widget_test.py
    - python tests/bar_test.py

after_success:
    - IF [ $VERS = 3.5 ]; then coveralls; fi
